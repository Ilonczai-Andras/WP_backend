# WP Backend

This project is part of the WP application backend, which handles data storage, retrieval and user interactions. It is built on the Spring Boot framework and provides RESTful APIs for the frontend.

## Technology overview

# **Java**: The main programming language.
* **Spring Boot**: The framework on which the application is built.
* **Spring Data JPA**: The layer for managing database interactions.
* **Spring Security**: Providing authentication and privilege management.
* **Maven**: The project build and dependency management tool.
* **Cloudinary**: Cloud-based service for storing and managing images and other media files.
* **JWT (JSON Web Tokens)**: A token-based mechanism for user authentication and session management.

## Project Structure

The project is divided into the following main packages and modules:

* `src/main/java/andras/ilonczai/wpbackend`: The root directory of the application source code.
    * `config`: Configuration classes such as security settings, JWT, and Cloudinary configuration.
    * `controllers`: REST controllers that handle incoming HTTP requests and return responses. Here are the endpoints of the different resources (Auth, Chapter, ConversationBoardPost, Follow, Profile, Story).
    * `data`: Data Transfer Objects (DTOs) that support data communication over the network.
        * `dtos`: General DTOs.
        * `entities`: Classes representing database entities.
    * `enums`: Listings for the different application level values.
    * `exceptions`: Custom exception handling classes.
    * `mappers`: Data conversion layer between entities and DTOs.
    * `repositories`: Data warehouse layer for persistence management (database operations).
    * `services`: Business logic layer containing the main functions of the application.
* `src/main/resources`: Resource files, such as `application.yaml` for configurations and the `static`, `templates` folders.
* `src/test`: Tests.
* `target`: Build output generated by Maven.
* `.env`: File for storing environment variables (usually for secret data).
* `.gitignore`: Git version control ignore files.
* `HELP.md`: Help file.
* `mvnw`, `mvnw.cmd`: Maven wrapper scripts.

## Install and Run

The following steps are required to run the application:

1. **Prerequisites**: Make sure you have Java Development Kit (JDK) version 17 or later installed on your system.
2. **Clone**: Clone the project from GitHub:
 ````bash
 git clone <repository_url>
 cd WP_backend
 ````
3. **Set environment variables**: Create the `.env` file in the root directory of the project and specify the required environment variables, such as database connection information, Cloudinary API keys, JWT secret key:
 ````
 # Example .env content
 DB_URL=jdbc:mysql://localhost:3306/wp_db
 DB_USERNAME=your_username
 DB_PASSWORD=your_password
 CLOUDINARY_CLOUD_NAME=your_cloud_name
 CLOUDINARY_API_KEY=your_api_key
 CLOUDINARY_API_SECRET=your_api_secret
 JWT_SECRET=your_jwt_secret_key
 ````
*Note*: Alternatively, these variables can be set in the `application.yaml` file, but the use of `.env` is recommended for handling sensitive data.

4. **Installing dependencies**: Navigate to the root directory of the project and run Maven to download the dependencies and build the project:
 ````bash
 mvn clean install
 ````
5.  **Run the application**: You can run the application with the following command:
 ```bash
 mvn spring-boot:run
 ````
 Or you can run the generated JAR file from the `target` directory:
 ```bash
 java -jar target/wpbackend-0.0.1-SNAPSHOT.jar
 ```
 (Version number may vary.)

 The application will start on port 8080 by default unless otherwise configured in the `application.yaml` file.

## API Documentation

More detailed information about the API endpoints can be obtained during a code review or by generating a Swagger/OpenAPI documentation.

**Some basic endpoints (as examples):**

* **`/api/auth/register`**: User registration.
* **`/api/auth/login`**: User login.
* **`/api/users/{userId}`**: Retrieve user profile.
* **`/api/stories`**: List stories.
* **`/api/chapters/{chapterId}`**: Get chapter details.

**Swagger/OpenAPI Documentation:**

The project includes the Swagger/OpenAPI documentation, which is available at the following endpoints after running the application:

* **`/v3/api-docs/**`**: The OpenAPI specification in JSON/YAML format.
* **`/swagger-ui/****`**: The Swagger UI interface, which provides an interactive browsable API.
* **`/swagger-ui.html`**: Swagger UI main page (for older versions).

These endpoints are enabled by default for everyone in the security configuration.

## Development

If you want to make improvements to the project:

1. **IDE**: Recommended IDEs: IntelliJ IDEA, Eclipse, VS Code (with Spring Boot extensions).
2. **Coding style**: Please stick to the existing coding style.
3. **Testing**: It is recommended to write unit and integration tests for the new features.

## Contribution

The project is open source and all contributions are welcome. Please follow the usual Git workflow (fork, create branch, make changes, pull request).

## Contact

If you have questions or need help, please contact the project maintainer.

---
